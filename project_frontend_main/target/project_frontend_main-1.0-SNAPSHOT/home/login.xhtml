<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      >
    <h:head>
        <title>Facelet Title</title>
        <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <style>
            *{
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            .container .form-1 {
                display: flex;
                flex-direction: column;
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: #fff;
                width: 30%;
                box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
                opacity: 1;
            }

            .form-1 {
                border-radius: 3%;
            }

            .container {
                height: 100vh;
                margin: 0 auto;
                position: relative;
                background: linear-gradient(rgba(150,150,150,0.4), rgba(150,150,150,0.4)), url("../images/loginBackground.jpg");
                background-size: cover;
                background-repeat: none;
                position: relative;
            }
            .form-1 h1 {
                text-align: center;
                margin-top: 0.7rem;
                margin-bottom: 1.5rem;
            }

            input[type="text"],
            input[type="password"]
            {
                border: none;
                outline: none;
                border-bottom: 1px solid;
                background: none;
                margin: 0.9rem 2rem;
                font-size: 1rem;
            }

            label {
                margin: 0 2rem;
            }

            span {
                /*margin: 0 2rem;*/
                /*cursor: pointer;*/
            }
            .input-title {
                width: 100%;
                margin-top: 5%;
                display: flex;
                justify-content: center;
            }
            button,  input[type="submit"] {
                margin: 2rem;
                margin-bottom: 1.5rem;
                padding: 0.5rem;
                cursor: pointer;
                border-radius: 1rem;
                border: none;
                font-size: 1.1rem;
                font-weight: bolder;
                color: #fff;
                background: linear-gradient(to right, #25aae1, #4481eb, #04befe, #3f86ed);
            }

            /* ........///Sign-Up///......... */

            h4 {
                text-align: center;
                font-weight: bolder;
                margin-bottom: 10%;
            }

            .icons {
                display: flex;
                justify-content: center;
                margin-bottom: 3rem;
                margin-top: 0.5rem;
            }

            .icons a {
                text-decoration: none;
                font-size: 1rem;
                margin: 0.2rem;
            }

            .icons .fa-facebook-f {
                border-radius: 50%;
                background: #5d75ab;
                color: #fff;
                padding: 1rem;
            }

            .icons .fa-twitter {
                border-radius: 50%;
                background: #1da1f2;
                color: white;
                padding: 1rem;
            }

            .icons .fa-google {
                border-radius: 50%;
                background: #ee5645;
                color: #fff;
                padding: 1rem;
            }

            .logo {
                height: 50%;
                width: 30%;
                text-align: center;
                border-radius: 50%;
                filter: drop-shadow(0px 2px 3px gray) contrast(130%) sepia(35%) saturate(150%);
            }

            /* ....///Media query///..... */

            @media (max-width: 501px) {
                html {
                    font-size: 15px;
                }

                .container .form-1 {
                    width: 300px;
                }
            }

            @media (min-width: 501px) and (max-width: 768px) {
                html {
                    font-size: 14px;
                }

                .container .form-1 {
                    width: 450px;
                }
            }

            @media (min-width: 765px) and (max-width: 1200px) {
                html {
                    font-size: 18px;
                }

                .container .form-1 {
                    width: 540px;
                    height: 550px;
                }
            }

            @media (orientation: landscape) and (max-height: 500px) {
                .container {
                    height: 100vmax;
                }
            }
            .user {
                margin-top: 7%;
            }
            a {
                text-decoration: none;
            }
            .closeBtn {
                margin-top: 2%;
                text-align: right;
                padding-right: 2%;
                color: red;
            }
            .closeBtn:hover {
                color: #131418;
            }
            .add-vehicle-btn {
                display: flex;
                justify-content: right;
                margin-top: 10%;
            }
        </style>
    </h:head>
    <h:body>
        <div class="container">
            <form class="form-1" method="post">
                <a href="../index.xhtml" class="closeBtn">
                    <i class="pi pi-times" style="font-size: 1.3rem"></i>
                </a>
                <h1> 
                    <img
                        class="user"
                        src="../images/loginUser.png"
                        height="100px"
                        width="100px"
                        alt="no-image"
                        />
                </h1>
                <h1 style="margin-top: -5%;">Sign in here</h1>
                <label for="username">Username</label>
                <input type="text" name="username" id="username" />
                <label for="password">Password</label>
                <input type="password" name="password" id="password" />
                <input type="submit" value="Login" name="submit"></input>
                <h4>Not Registered Yet ? <a href="register.xhtml">Register</a></h4>
                <h4 style="margin-top: -5%;"><h:form><h:commandLink value="Forgot Password ?" onclick="PF('takeUsername').show()"></h:commandLink></h:form></h4>
            </form>
        </div>
        <div class="all-dialogs">
            <p:dialog widgetVar="invalidCredentials" minHeight="40" width="450" showEffect="fade" modal="true">
                <div style="display:flex; justify-content:center; width:100%;">
                    <i class="pi pi-times" style="color:red;font-size: 60px;"></i>
                </div><br/>
                <h4 class="m-0">
                    Invalid Username or Password
                </h4>
            </p:dialog>
        </div>
        <div class="all-dialogs">
            <p:dialog widgetVar="editPassword" draggable="false" closable="false" minHeight="60" width="800" showEffect="fade" modal="true">
                <h:form>
                    <div style="display:flex; justify-content:center; width:100%;">
                        <h2>EDIT PASSWORD</h2>
                    </div><br/>
                    <div class="edit-content">
                        <span class="ui-input-icon-left input-title">
                            <i class="fa-solid fa-lock"></i>
                            <p:password placeholder="Enter New Password" value="#{registrationController.new_password}"  style="width: 90%;" />
                        </span>
                        <span class="ui-input-icon-left input-title">
                            <i class="fa-solid fa-lock"></i>
                            <p:password placeholder="Confirm New Password" value="#{registrationController.confirm_new_password}"  style="width: 90%;" />
                        </span>
                    </div>
                    <div class="add-vehicle-btn">
                        <p:commandButton value="Edit Password" action="#{registrationController.editPassword()}" styleClass="ui-button-raised ui-button-info" style="margin-right: 2%;" />
                        <p:commandButton value="Close" action="#{registrationController.closeEditPasswordDialog()}" styleClass="ui-button-raised ui-button-danger" />
                    </div>
                </h:form>
            </p:dialog>
            <p:dialog widgetVar="takeUsername" draggable="false" minHeight="70" width="550" showEffect="fade" modal="true">
                <h2 style="text-align: center; margin-top: -1%;">USERNAME</h2>
                <h:form>
                    <span class="ui-input-icon-left input-title">
                        <i class="fa-solid fa-user"></i>
                        <p:inputText placeholder="Enter Your Username" value="#{registrationController.current_username}" style="width: 90%;" />
                    </span>
                    <div class="add-vehicle-btn">
                        <p:commandButton value="Send" action="#{registrationController.submitUsernameForForgotPassword()}"  styleClass="ui-button-raised ui-button-info" style="margin-right: 2%; color: white;" />
                    </div>
                </h:form>
            </p:dialog>
            <p:dialog widgetVar="forgotEmptyField" minHeight="30" width="450" showEffect="fade" modal="true">
                <div style="display:flex; justify-content:center; width:100%;">
                    <i class="pi pi-times" style="color:red;font-size: 60px;"></i>
                </div><br/>
                <h3 class="m-0" style="text-align: center; margin-bottom: 10%;">
                    Please Enter the Username
                </h3>
            </p:dialog>
            <p:dialog widgetVar="invalidUsername" minHeight="30" width="450" showEffect="fade" modal="true">
                <div style="display:flex; justify-content:center; width:100%;">
                    <i class="pi pi-times" style="color:red;font-size: 60px;"></i>
                </div><br/>
                <h3 class="m-0" style="text-align: center; margin-bottom: 10%;">
                    Please enter valid username
                </h3>
            </p:dialog>
            <p:dialog widgetVar="getVerificationCode" draggable="false" minHeight="70" width="550" showEffect="fade" modal="true">
                <h2 style="text-align: center; margin-top: -1%;">VERIFICATION CODE</h2>
                <h6 style="text-align: center; margin-top: 2%;">Enter Verification Code which is sent to the email registered with your username</h6>
                <h:form>
                    <span class="ui-input-icon-left input-title">
                        <i class="fa-solid fa-lock"></i>
                        <p:inputText placeholder="Enter Verification Code" value="#{registrationController.user_code}" style="width: 90%;" />
                    </span>
                    <div class="add-vehicle-btn">
                        <p:commandButton value="Resend Code" action="#{registrationController.sendOTP()}"  styleClass="ui-button-raised" style="margin-right: 2%; color: white;" />
                        <p:commandButton value="Submit" action="#{registrationController.checkVerificationCode()}"  styleClass="ui-button-raised ui-button-info" style="margin-right: 2%; color: white;" />
                    </div>
                </h:form>
            </p:dialog>
            <p:dialog widgetVar="invalidVerificationCode" minHeight="30" width="450" showEffect="fade" modal="true">
                <div style="display:flex; justify-content:center; width:100%;">
                    <i class="pi pi-times" style="color:red;font-size: 60px;"></i>
                </div><br/>
                <h3 class="m-0" style="text-align: center; margin-bottom: 10%;">
                    Invalid Verification Code
                </h3>
            </p:dialog>
            <p:dialog widgetVar="emptyPasswordField" minHeight="30" width="450" showEffect="fade" modal="true">
                <div style="display:flex; justify-content:center; width:100%;">
                    <i class="pi pi-times" style="color:red;font-size: 60px;"></i>
                </div><br/>
                <h3 class="m-0" style="text-align: center; margin-bottom: 10%;">
                    Any of the fields should not be empty
                </h3>
            </p:dialog>
            <p:dialog widgetVar="invalidNewConfirmPassword" minHeight="30" width="630" showEffect="fade" modal="true">
                <div style="display:flex; justify-content:center; width:100%;">
                    <i class="pi pi-times" style="color:red;font-size: 60px;"></i>
                </div><br/>
                <h3 class="m-0" style="text-align: center; margin-bottom: 10%;">
                    New Password and Confirm Password are not matching
                </h3>
            </p:dialog>
            <p:dialog widgetVar="passwordUpdated" closable="false" minHeight="30" width="450" showEffect="fade" modal="true">
                <div style="display:flex; justify-content:center; width:100%;">
                    <i class="pi pi-check" style="color:green;font-size: 60px;"></i>
                </div><br/>
                <h:form>
                <h3 class="m-0" style="text-align: center; margin-bottom: 10%;">
                    Password Edited Successfully
                </h3>
                    <div class="add-vehicle-btn">
                        <p:commandButton value="Close" action="#{registrationController.closePasswordEditedDialog()}" styleClass="ui-button-raised ui-button-danger" />
                    </div>
                </h:form>
            </p:dialog>
             <p:dialog widgetVar="newVerificationCode" minHeight="30" width="450" showEffect="fade" modal="true">
                <div style="display:flex; justify-content:center; width:100%;">
                    <i class="pi pi-check" style="color:green;font-size: 60px;"></i>
                </div><br/>
                <h3 class="m-0" style="text-align: center; margin-bottom: 10%;">
                    New Verification Code is sent
                </h3>
            </p:dialog>
        </div>
    </h:body>
</html>

